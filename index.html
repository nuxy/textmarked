<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="textmarked.min.css" />
    <link rel="stylesheet" type="text/css" href="css/demo.css" />

    <script type="text/javascript" src="textmarked.min.js"></script>
    <script>
      window.onload = function() {
        var settings = {
          allowKeys: `a-z0-9\\s,.?!$%&()\\[\\]"'-_#*\`>`,
          allowEnter: true,
          clipboard: true,
          showExample: true,
          options: [
            'Heading',
            'Bold',
            'Italic',
            'Blockquote',
            'Ordered-List',
            'Unordered-List',
            'Code',
            'Horizontal-Rule',
            'Link',
            'Image'
          ]
        };

        var textarea = document.getElementById('comments');

        var editor = textMarked(textarea, settings);
        editor.focus();

        var output = document.getElementById('output');

        var previewButton = document.getElementById('preview-button');

        previewButton.addEventListener('click', event => {
          event.preventDefault();

          output.innerHTML = editor.markup();
        });

        var toggleButton = document.getElementById('toggle-button');

        toggleButton.addEventListener('click', event => {
          event.preventDefault();

          var field1 = document.querySelector('#comments');
          var field2 = document.querySelector('.textmarked');

          if (field1.style.visibility === 'hidden') {
            field1.style.visibility = 'visible';
            field1.style.position = 'relative';
            field2.style.display = 'none';
          } else {
            field1.style.visibility = 'hidden';
            field1.style.position = 'absolute';
            field2.style.display = 'block';
          }
        });
      };
    </script>

    <title>Enable Markdown editing in HTML &lt;textarea &sol;&gt; | textmarked</title>
  </head>
  <body>
    <form>
      <fieldset>
        <legend>
          <button id="preview-button">Preview</button>
          <button id="toggle-button">Toggle</button>
        </legend>

        <div>
          <label for="comments">Comments</label>

          <textarea id="comments" name="comments" cols="50" rows="10"></textarea>
        </div>
      </fieldset>

      <input type="Reset" />
    </form>

    <div id="output"></div>
  </body>
</html>
